(this["webpackJsonpinline-chatroom"]=this["webpackJsonpinline-chatroom"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports={loginForm:"LoginForm_loginForm__3Hfw0",title:"LoginForm_title__3-Kce",subTitle:"LoginForm_subTitle__QeLVi",input:"LoginForm_input__2Xalp"}},function(e,t,n){e.exports={message:"Message_message__jaYcJ",avatar:"Message_avatar__1viwL",info:"Message_info__2YFxR"}},function(e,t,n){e.exports={chatroom:"routes_chatroom__161VA",commentList:"routes_commentList__2JqDw",commentForm:"routes_commentForm__2gdhO"}},,function(e,t,n){e.exports={userHeader:"UserHeader_userHeader__1lOqt",logoutButton:"UserHeader_logoutButton__iFt7V"}},,function(e,t,n){e.exports={commentForm:"CommentForm_commentForm__2LWC_",input:"CommentForm_input__9etBS"}},,function(e,t,n){e.exports={avatar:"Avatar_avatar__1miks"}},function(e,t,n){e.exports={username:"Name_username__1wtXG"}},function(e,t,n){e.exports={messageText:"MessageText_messageText__1RQM-"}},function(e,t,n){e.exports={commentList:"CommentList_commentList__3nXfg"}},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(3),o=n.n(a),c=n(15),r=n.n(c),m=n(5),i=n(16),u=n.n(i),l=function(){return Object(s.jsx)("div",{className:u.a.avatar})},j=n(17),d=n.n(j),f=function(e){var t=e.name;return Object(s.jsx)("div",{className:d.a.username,children:t})},b=n(12),x=n.n(b),O=o.a.memo((function(e){var t=e.user,n=e.onLogout;return Object(s.jsxs)("div",{className:x.a.userHeader,children:[Object(s.jsx)(l,{}),Object(s.jsx)(f,{name:t.name}),Object(s.jsx)("button",{className:x.a.logoutButton,onClick:n,children:"Logout"})]})})),_=n(18),h=n.n(_),v=function(e){var t=e.text;return Object(s.jsx)("div",{className:h.a.messageText,children:t})},p=n(9),g=n.n(p),N=o.a.memo((function(e){var t=e.name,n=e.text;return Object(s.jsxs)("div",{className:g.a.message,children:[Object(s.jsx)("div",{className:g.a.avatar,children:Object(s.jsx)(l,{})}),Object(s.jsxs)("div",{className:g.a.info,children:[Object(s.jsx)(f,{name:t}),Object(s.jsx)(v,{text:n})]})]})})),I=n(19),L=n.n(I),F=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){e.current.scrollIntoView()})),Object(s.jsx)("div",{ref:e})},w=function(e){var t=e.comments,n=e.users,a=t.map((function(e){return Object(s.jsx)(N,{name:n[e.userId]?n[e.userId].name:"**Deleted User**",text:e.text},e.id)}));return Object(s.jsxs)("div",{className:L.a.commentList,children:[a,Object(s.jsx)(F,{})]})},y=n(13),S=(n(26),{apiKey:"AIzaSyDdkgX0E-3X8mkxQ3krNb6J1lwse3dODIw",authDomain:"inline-chat-room-code-test.firebaseapp.com",databaseURL:"https://inline-chat-room-code-test-default-rtdb.firebaseio.com",projectId:"inline-chat-room-code-test",storageBucket:"inline-chat-room-code-test.appspot.com",messagingSenderId:"663524451356",appId:"1:663524451356:web:b804a2937a8cd91e83ebd9",measurementId:"G-JRVBKP32JR"}),k={comments:null,users:null},T=n(14),B=n.n(T),C=function(e){var t=e.user,n=Object(a.useState)(""),o=Object(m.a)(n,2),c=o[0],r=o[1],i=Object(a.useRef)(null);return Object(a.useEffect)((function(){i.current.focus()}),[i]),Object(s.jsx)("div",{className:B.a.commentForm,children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault(),k.comments&&c&&k.comments.push({text:c,userId:t.id,timestamp:(new Date).getTime()},(function(e){e||r("")}))},children:Object(s.jsx)("input",{ref:i,className:B.a.input,type:"text",placeholder:"Typing Message Here",value:c,onChange:function(e){return r(e.target.value)}})})})},D=n(8),E=n.n(D),R=function(e){var t=e.setUser,n=Object(a.useState)(""),o=Object(m.a)(n,2),c=o[0],r=o[1],i=Object(a.useRef)(null),u=window.localStorage;return Object(a.useEffect)((function(){i.current.focus()}),[i]),Object(s.jsx)("div",{className:E.a.loginForm,children:Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{className:E.a.title,children:"Welcome to chat room"}),Object(s.jsx)("h3",{className:E.a.subTitle,children:"Please give your name to join :)"}),Object(s.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),c){var n=k.users.push();n.set({name:c},(function(e){e||(u.setItem("chat-room:userName",c),u.setItem("chat-room:userId",n.key),t({name:c,id:n.key}))}))}},children:Object(s.jsx)("input",{ref:i,className:E.a.input,type:"text",value:c,placeholder:"What's your name?",onChange:function(e){return r(e.target.value)}})})]})})},H=n(10),J=n.n(H),M=o.a.memo((function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({}),r=Object(m.a)(c,2),i=r[0],u=r[1],l=Object(a.useState)({}),j=Object(m.a)(l,2),d=j[0],f=j[1],b=Object(a.useState)(!0),x=Object(m.a)(b,2),_=x[0],h=x[1],v=window.localStorage;return Object(a.useEffect)((function(){!function(){y.a.initializeApp(S);var e=y.a.database();k.comments=e.ref("room/comments"),k.users=e.ref("room/users")}();var e=v.getItem("chat-room:userName"),t=v.getItem("chat-room:userId");return e&&t&&f({name:e,id:t}),h(!1),k.users.on("value",(function(e){var t={};e.forEach((function(e){t[e.key]=e.val()})),u(t)})),k.comments.orderByChild("timestamp").on("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();n.id=e.key,t.push(n)})),o(t)})),function(){k.users.off(),k.comments.off()}}),[]),_?"":d.name&&d.id?Object(s.jsxs)("div",{className:J.a.chatroom,children:[Object(s.jsx)(O,{user:d,onLogout:function(){f({}),v.removeItem("chat-room:userName"),v.removeItem("chat-room:userId")}}),Object(s.jsx)("div",{className:J.a.commentList,children:Object(s.jsx)(w,{comments:n,users:i})}),Object(s.jsx)("div",{className:J.a.commentForm,children:Object(s.jsx)(C,{user:d})})]}):d.name&&d.id?void 0:Object(s.jsx)(R,{setUser:f})}));r.a.render(Object(s.jsx)(M,{}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.14d2ccac.chunk.js.map