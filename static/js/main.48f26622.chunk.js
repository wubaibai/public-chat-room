(this["webpackJsonpinline-chatroom"]=this["webpackJsonpinline-chatroom"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports={loginForm:"LoginForm_loginForm__3Hfw0",title:"LoginForm_title__3-Kce",subTitle:"LoginForm_subTitle__QeLVi",input:"LoginForm_input__2Xalp"}},function(e,t,n){e.exports={message:"Message_message__jaYcJ",avatar:"Message_avatar__1viwL",info:"Message_info__2YFxR"}},function(e,t,n){e.exports={chatroom:"routes_chatroom__161VA",commentList:"routes_commentList__2JqDw",commentForm:"routes_commentForm__2gdhO"}},,function(e,t,n){e.exports={userHeader:"UserHeader_userHeader__1lOqt",logoutButton:"UserHeader_logoutButton__iFt7V"}},,function(e,t,n){e.exports={commentForm:"CommentForm_commentForm__2LWC_",input:"CommentForm_input__9etBS"}},,function(e,t,n){e.exports={avatar:"Avatar_avatar__1miks"}},function(e,t,n){e.exports={messageText:"MessageText_messageText__1RQM-"}},function(e,t,n){e.exports={username:"Name_username__1wtXG"}},function(e,t,n){e.exports={commentList:"CommentList_commentList__3nXfg"}},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(3),c=n.n(a),o=n(15),r=n.n(o),i=n(5),m=n(16),u=n.n(m),j=function(){return Object(s.jsx)("div",{className:u.a.avatar})},l=n(17),f=n.n(l),d=function(e){var t=e.text;return Object(s.jsx)("div",{className:f.a.messageText,children:t})},b=n(18),x=n.n(b),O=function(e){var t=e.name;return Object(s.jsx)("div",{className:x.a.username,children:t})},_=n(12),v=n.n(_),h=c.a.memo((function(e){var t=e.user;return Object(s.jsxs)("div",{className:v.a.userHeader,children:[Object(s.jsx)(j,{}),Object(s.jsx)(O,{name:t.name}),Object(s.jsx)("button",{className:v.a.logoutButton,children:"Logout"})]})})),p=n(9),g=n.n(p),N=c.a.memo((function(e){var t=e.name,n=e.text;return Object(s.jsxs)("div",{className:g.a.message,children:[Object(s.jsx)("div",{className:g.a.avatar,children:Object(s.jsx)(j,{})}),Object(s.jsxs)("div",{className:g.a.info,children:[Object(s.jsx)(O,{name:t}),Object(s.jsx)(d,{text:n})]})]})})),F=n(19),L=n.n(F),y=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){e.current.scrollIntoView()})),Object(s.jsx)("div",{ref:e})},k=function(e){var t=e.comments,n=e.users,a=t.map((function(e){return Object(s.jsx)(N,{name:n[e.userId].name,text:e.text},e.id)}));return Object(s.jsxs)("div",{className:L.a.commentList,children:[a,Object(s.jsx)(y,{})]})},w=n(13),I=(n(26),{apiKey:"AIzaSyDdkgX0E-3X8mkxQ3krNb6J1lwse3dODIw",authDomain:"inline-chat-room-code-test.firebaseapp.com",databaseURL:"https://inline-chat-room-code-test-default-rtdb.firebaseio.com",projectId:"inline-chat-room-code-test",storageBucket:"inline-chat-room-code-test.appspot.com",messagingSenderId:"663524451356",appId:"1:663524451356:web:b804a2937a8cd91e83ebd9",measurementId:"G-JRVBKP32JR"}),R={comments:null,users:null},S=n(14),B=n.n(S),E=function(e){var t=e.user,n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],r=c[1],m=Object(a.useRef)(null);return Object(a.useEffect)((function(){m.current.focus()}),[m]),Object(s.jsx)("div",{className:B.a.commentForm,children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault(),R.comments&&o&&R.comments.push({text:o,userId:t.id,timestamp:(new Date).getTime()},(function(e){e||r("")}))},children:Object(s.jsx)("input",{ref:m,className:B.a.input,type:"text",placeholder:"Typing Message Here",value:o,onChange:function(e){return r(e.target.value)}})})})},T=n(8),C=n.n(T),D=function(e){var t=e.setUser,n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],r=c[1],m=Object(a.useRef)(null);return Object(a.useEffect)((function(){m.current.focus()}),[m]),Object(s.jsx)("div",{className:C.a.loginForm,children:Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{className:C.a.title,children:"Welcome to chat room"}),Object(s.jsx)("h3",{className:C.a.subTitle,children:"Please give your name to join :)"}),Object(s.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),o){var n=R.users.push();n.set({name:o},(function(e){e||t({name:o,id:n.key})}))}},children:Object(s.jsx)("input",{ref:m,className:C.a.input,type:"text",value:o,placeholder:"What's your name?",onChange:function(e){return r(e.target.value)}})})]})})},H=n(10),J=n.n(H),M=c.a.memo((function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({}),r=Object(i.a)(o,2),m=r[0],u=r[1],j=Object(a.useState)({}),l=Object(i.a)(j,2),f=l[0],d=l[1];return Object(a.useEffect)((function(){return function(){w.a.initializeApp(I);var e=w.a.database();R.comments=e.ref("room/comments"),R.users=e.ref("room/users")}(),R.users.on("value",(function(e){var t={};e.forEach((function(e){t[e.key]=e.val()})),u(t)})),R.comments.orderByChild("timestamp").on("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();n.id=e.key,t.push(n)})),c(t)})),d({name:"Cathy",id:"-MOU5gRREq4X8BkWqjU3"}),function(){R.users.off(),R.comments.off()}}),[]),f.name&&f.id?Object(s.jsxs)("div",{className:J.a.chatroom,children:[Object(s.jsx)(h,{user:f}),Object(s.jsx)("div",{className:J.a.commentList,children:Object(s.jsx)(k,{comments:n,users:m})}),Object(s.jsx)("div",{className:J.a.commentForm,children:Object(s.jsx)(E,{user:f})})]}):Object(s.jsx)(D,{setUser:d})}));r.a.render(Object(s.jsx)(M,{}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.48f26622.chunk.js.map