{"version":3,"sources":["components/organisms/LoginForm/index.module.css","components/molecules/Message/index.module.css","routes/index.module.css","components/organisms/UserHeader/index.module.css","components/organisms/CommentForm/index.module.css","components/atoms/Avatar/index.module.css","components/atoms/Name/index.module.css","components/atoms/MessageText/index.module.css","components/organisms/CommentList/index.module.css","components/atoms/Avatar/index.js","components/atoms/Name/index.js","components/organisms/UserHeader/index.js","components/atoms/MessageText/index.js","components/molecules/Message/index.js","components/organisms/CommentList/index.js","modules/firebase.js","components/organisms/CommentForm/index.js","components/organisms/LoginForm/index.js","routes/index.js","index.js"],"names":["module","exports","Avatar","className","style","avatar","UserName","name","username","UserHeader","React","memo","user","onLogout","userHeader","Name","logoutButton","onClick","MessageText","text","messageText","Message","message","info","ListEnd","listEndRef","useRef","useEffect","current","scrollIntoView","ref","CommentList","comments","users","list","map","comment","userId","id","commentList","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseRef","CommentForm","useState","setMessage","commentInput","focus","commentForm","onSubmit","e","preventDefault","push","timestamp","Date","getTime","error","input","type","placeholder","value","onChange","target","LoginForm","setUser","setName","nameInputRef","storage","window","localStorage","loginForm","title","subTitle","newUser","set","err","setItem","key","ChatRoom","setComments","setUsers","loading","setLoading","firebase","initializeApp","database","initFirebase","userName","getItem","on","usersSnapshot","result","forEach","userSnapshot","val","orderByChild","commentsSnapshot","commentSnapshot","commentData","off","chatroom","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.14d2ccac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginForm\":\"LoginForm_loginForm__3Hfw0\",\"title\":\"LoginForm_title__3-Kce\",\"subTitle\":\"LoginForm_subTitle__QeLVi\",\"input\":\"LoginForm_input__2Xalp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__jaYcJ\",\"avatar\":\"Message_avatar__1viwL\",\"info\":\"Message_info__2YFxR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatroom\":\"routes_chatroom__161VA\",\"commentList\":\"routes_commentList__2JqDw\",\"commentForm\":\"routes_commentForm__2gdhO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userHeader\":\"UserHeader_userHeader__1lOqt\",\"logoutButton\":\"UserHeader_logoutButton__iFt7V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentForm\":\"CommentForm_commentForm__2LWC_\",\"input\":\"CommentForm_input__9etBS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__1miks\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"username\":\"Name_username__1wtXG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageText\":\"MessageText_messageText__1RQM-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commentList\":\"CommentList_commentList__3nXfg\"};","import React from 'react';\n\nimport style from './index.module.css';\n\nconst Avatar = () => {\n    return (\n        <div className={style.avatar}></div>\n    )\n};\n\nexport default Avatar;\n","import React from 'react';\n\nimport style from './index.module.css';\n\nconst UserName = ({ name }) => {\n    return (\n        <div className={style.username}>{name}</div>\n    )\n};\n\nexport default UserName;\n","import React from 'react';\n\nimport Avatar from '../../atoms/Avatar/index';\nimport Name from '../../atoms/Name/index';\nimport style from './index.module.css';\n\nconst UserHeader = React.memo(({\n    user,\n    onLogout,\n}) => {\n    return (\n        <div className={style.userHeader}>\n            <Avatar />\n            <Name name={user.name} />\n            <button className={style.logoutButton} onClick={onLogout}>Logout</button>\n        </div>\n    )\n});\n\nexport default UserHeader;\n","import React from 'react';\n\nimport style from './index.module.css';\n\nconst MessageText = ({ text }) => {\n    return (\n        <div className={style.messageText}>{text}</div>\n    )\n};\n\nexport default MessageText;\n","import React from 'react';\n\nimport Avatar from '../../atoms/Avatar/index';\nimport MessageText from '../../atoms/MessageText/index';\nimport Name from '../../atoms/Name/index';\nimport style from './index.module.css';\n\nconst Message = React.memo(({\n    name,\n    text,\n}) => {\n    return (\n        <div className={style.message}>\n            <div className={style.avatar}>\n                <Avatar />\n            </div>\n            <div className={style.info}>\n                <Name name={name} />\n                <MessageText text={text} />\n            </div>\n        </div>\n    )\n});\n\nexport default Message;\n","import React, { useEffect, useRef } from 'react';\n\nimport Message from '../../molecules/Message/index';\nimport style from './index.module.css';\n\nconst ListEnd = () => {\n    const listEndRef = useRef();\n\n    useEffect(() => {\n        listEndRef.current.scrollIntoView();\n    });\n\n    return (\n        <div ref={listEndRef} />\n    );\n};\n\nconst CommentList = ({ comments, users }) => {\n    const list = comments.map((comment) => (\n        <Message\n            key={comment.id}\n            name={users[comment.userId] ? users[comment.userId].name : '**Deleted User**' }\n            text={comment.text}\n        />\n    ));\n\n    return (\n        <div className={style.commentList}>\n            {list}\n            <ListEnd />\n        </div>\n    );\n};\n\nexport default CommentList;\n","import firebase from 'firebase/app';\nimport 'firebase/database';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDdkgX0E-3X8mkxQ3krNb6J1lwse3dODIw\",\n    authDomain: \"inline-chat-room-code-test.firebaseapp.com\",\n    databaseURL: \"https://inline-chat-room-code-test-default-rtdb.firebaseio.com\",\n    projectId: \"inline-chat-room-code-test\",\n    storageBucket: \"inline-chat-room-code-test.appspot.com\",\n    messagingSenderId: \"663524451356\",\n    appId: \"1:663524451356:web:b804a2937a8cd91e83ebd9\",\n    measurementId: \"G-JRVBKP32JR\"\n};\n\nexport const firebaseRef = {\n    comments: null,\n    users: null,\n};\n\nexport const init = () => {\n    firebase.initializeApp(firebaseConfig);\n\n    const database = firebase.database();\n    firebaseRef.comments = database.ref('room/comments');\n    firebaseRef.users = database.ref('room/users');\n};\n\nexport default 'firebase';\n","import React, { useState, useRef, useEffect } from 'react';\n\nimport { firebaseRef } from '../../../modules/firebase';\nimport style from './index.module.css';\n\nconst CommentForm = ({\n    user,\n}) => {\n    const [message, setMessage] = useState('');\n    const commentInput = useRef(null);\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        if (!firebaseRef.comments || !message) {\n            return;\n        }\n\n        firebaseRef.comments.push({\n            text: message,\n            userId: user.id,\n            timestamp: new Date().getTime(),\n        }, (error) => {\n            if (error) {\n              // The write failed...\n            } else {\n                setMessage('');\n            }\n        });\n    };\n\n    useEffect(() => {\n        commentInput.current.focus();\n    }, [commentInput]);\n\n    return (\n        <div className={style.commentForm}>\n            <form onSubmit={onSubmit}>\n                <input\n                    ref={commentInput}\n                    className={style.input}\n                    type=\"text\"\n                    placeholder=\"Typing Message Here\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                />\n            </form>\n        </div>\n    )\n};\n\nexport default CommentForm;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport { firebaseRef } from '../../../modules/firebase';\nimport style from './index.module.css';\n\nconst LoginForm = ({ setUser }) => {\n    const [name, setName] = useState('');\n    const nameInputRef = useRef(null);\n    const storage = window.localStorage;\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        if (!name) {\n            return;\n        }\n\n        const newUser = firebaseRef.users.push();\n        newUser.set({\n            name,\n        }, (err) => {\n            if (err) {\n                return;\n            }\n\n            storage.setItem('chat-room:userName', name);\n            storage.setItem('chat-room:userId', newUser.key);\n\n            setUser({\n                name: name,\n                id: newUser.key,\n            });\n        });\n    };\n\n    useEffect(() => {\n        nameInputRef.current.focus();\n    }, [nameInputRef]);\n\n    return (\n        <div className={style.loginForm}>\n            <div>\n                <h1 className={style.title}>Welcome to chat room</h1>\n                <h3 className={style.subTitle}>Please give your name to join :)</h3>\n                <form onSubmit={onSubmit}>\n                    <input\n                        ref={nameInputRef}\n                        className={style.input}\n                        type=\"text\"\n                        value={name}\n                        placeholder=\"What's your name?\"\n                        onChange={(e) => setName(e.target.value)}\n                    />\n                </form>\n            </div>\n        </div>\n    )\n};\n\nexport default LoginForm;\n","import React, { useEffect, useState } from 'react';\n\nimport UserHeader from '../components/organisms/UserHeader/index'\nimport CommentList from '../components/organisms/CommentList/index';\nimport CommentForm from '../components/organisms/CommentForm/index';\nimport LoginForm from '../components/organisms/LoginForm/index';\nimport { init as initFirebase, firebaseRef } from '../modules/firebase';\nimport style from './index.module.css';\n\nconst ChatRoom = React.memo(() => {\n    const [comments, setComments] = useState([]);\n    const [users, setUsers] = useState({});\n    const [user, setUser] = useState({});\n    const [loading, setLoading] = useState(true);\n    const storage = window.localStorage;\n\n    const onLogout = () => {\n        setUser({});\n        storage.removeItem('chat-room:userName');\n        storage.removeItem('chat-room:userId');\n    };\n\n    useEffect(() => {\n        initFirebase();\n\n        /**\n         * For Quick Development before localstorage setup\n         */\n        const userName = storage.getItem('chat-room:userName');\n        const userId = storage.getItem('chat-room:userId');\n        if (userName && userId) {\n            setUser({\n                name: userName,\n                id: userId,\n            });\n        }\n        setLoading(false);\n\n        firebaseRef.users.on('value', (usersSnapshot) => {\n            const result = {};\n            usersSnapshot.forEach((userSnapshot) => {\n                result[userSnapshot.key] = userSnapshot.val();\n            });\n            setUsers(result);\n        });\n\n        firebaseRef.comments.orderByChild('timestamp').on('value', (commentsSnapshot) => {\n            const result = [];\n            commentsSnapshot.forEach((commentSnapshot) => {\n                const commentData = commentSnapshot.val();\n                commentData.id = commentSnapshot.key;\n                result.push(commentData);\n            });\n            setComments(result);\n        });\n\n        return () => {\n            firebaseRef.users.off();\n            firebaseRef.comments.off();\n        };\n    }, []);\n\n    if (loading) {\n        return '';\n    }\n    \n    if (user.name && user.id) {\n        return (\n            <div className={style.chatroom}>\n                <UserHeader user={user} onLogout={onLogout} />\n                <div className={style.commentList}>\n                    <CommentList comments={comments} users={users}/>\n                </div>\n                <div className={style.commentForm}>\n                    <CommentForm user={user} />\n                </div>\n            </div>\n        )\n    }\n\n    if (!user.name || !user.id) {\n        return <LoginForm setUser={setUser} />\n    }\n});\n\nexport default ChatRoom;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport ChatRoom from './routes/index';\n\nReactDOM.render(\n    <ChatRoom />,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}